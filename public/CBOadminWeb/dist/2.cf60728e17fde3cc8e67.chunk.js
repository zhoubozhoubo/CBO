webpackJsonp([2],{242:function(t,e,i){"use strict";function n(t){d||(i(863),i(865))}Object.defineProperty(e,"__esModule",{value:!0});var a=i(477),o=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var s=i(868),l=(i.n(s),i(4)),d=!1,c=n,u=Object(l.a)(o.a,s.render,s.staticRenderFns,!1,c,"data-v-b53cecea",null);u.options.__file="src/views/content/cbo_news/list.vue",e.default=u.exports},273:function(t,e,i){"use strict";e.a={name:"VueUEditor",props:{ueditorPath:{type:String,default:"/static/ueditor1_4_3_3/"},ueditorConfig:{type:Object,default:function(){return{}}}},data:function(){return{randomId:"editor_"+1e17*Math.random(),instance:null,scriptTagStatus:0}},created:function(){void 0!==window.UE?(this.scriptTagStatus=2,this.initEditor()):this.insertScriptTag()},beforeDestroy:function(){null!==this.instance&&this.instance.destroy&&this.instance.destroy()},methods:{insertScriptTag:function(){var t=this,e=document.getElementById("editorScriptTag"),i=document.getElementById("configScriptTag");if(null===e){i=document.createElement("script"),i.type="text/javascript",i.src=this.ueditorPath+"ueditor.config.js",i.id="configScriptTag",e=document.createElement("script"),e.type="text/javascript",e.src=this.ueditorPath+"ueditor.all.js",e.id="editorScriptTag";var n=document.getElementsByTagName("head")[0];n.appendChild(i),n.appendChild(e)}i.loaded?this.scriptTagStatus++:i.addEventListener("load",function(){t.scriptTagStatus++,i.loaded=!0,t.initEditor()}),e.loaded?this.scriptTagStatus++:e.addEventListener("load",function(){t.scriptTagStatus++,e.loaded=!0,t.initEditor()}),this.initEditor()},initEditor:function(){var t=this;2===this.scriptTagStatus&&null===this.instance&&this.$nextTick(function(){t.instance=window.UE.getEditor(t.randomId,t.ueditorConfig),t.instance.addListener("ready",function(){t.$emit("ready",t.instance)})})}}}},294:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(295);e.default=n.a},295:function(t,e,i){"use strict";var n=i(273),a=i(296),o=i(4),r=Object(o.a)(n.a,a.a,a.b,!1,null,null,null);r.options.__file="node_modules/vue-ueditor/src/components/UEditor.vue",e.a=r.exports},296:function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a});var n=function(){var t=this,e=t.$createElement;return(t._self._c||e)("script",{attrs:{id:t.randomId,name:"content",type:"text/plain"}})},a=[];n._withStripped=!0},477:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(55),o=n(a),r=i(867),s=(i(93),i(294)),l=n(s),d=function(t,e,i,n){return e("Button",{props:{type:"primary"},style:{margin:"0 5px"},on:{click:function(){t.formItem.id=i.id,t.formItem.title=i.title,t.formItem.img=i.img,t.formItem.content=i.content,t.editor.setContent(t.formItem.content),t.formItem.author=i.author,t.formItem.date=i.date,t.modalSetting.show=!0,t.modalSetting.index=n}}},"编辑")},c=function(t,e,i,n){return e("Poptip",{props:{confirm:!0,title:"您确定要删除这条数据吗? ",transfer:!0},on:{"on-ok":function(){(0,r.coruData)({id:i.id,is_delete:1}).then(function(e){1===e.data.code?(t.tableData.splice(n,1),t.$Message.success(e.data.msg)):t.$Message.error(e.data.msg)},function(e){t.$Message.error(e.data.msg)})}}},[e("Button",{style:{margin:"0 5px"},props:{type:"error",placement:"top"}},"删除")])},u=function(t,e,i,n){return e("Button",{props:{type:"success",size:"small"},style:{margin:"0 5px"},on:{click:function(){t.modalSeeingCon.title=i.title,t.modalSeeingCon.content=i.content,t.modalSeeingCon.show=!0}}},"查看")};e.default={name:"list",components:{VueUEditor:l.default},data:function(){return{editor:"",editorConfig:{autoHeightEnabled:!1,initialFrameHeight:400,initialFrameWidth:"100%",serverUrl:"http://localhost:8003/controller.php",UEDITOR_HOME_URL:"/static/Ue/",zIndex:9999},columnsList:[{title:"序号",type:"index",align:"center",width:"60"},{title:"新闻标题",key:"title",align:"center"},{title:"新闻封面",key:"img",align:"center",width:"100"},{title:"新闻内容",key:"content",align:"center",width:"100"},{title:"新闻作者",key:"author",align:"center",width:"150"},{title:"新闻日期",key:"date",align:"center",width:"150"},{title:"操作",key:"handle",align:"center",width:"200",handle:["edit","delete"]}],tableData:[],tableShow:{loading:!0,currentPage:1,pageSize:10,listCount:0},searchConf:{title:"",date:""},formItem:{id:"",title:"",img:"",content:"",author:"",date:""},modalSetting:{show:!1,loading:!1,index:0},modalSeeingImg:{img:"",show:!1},modalSeeingCon:{title:"",content:"",show:!1},uploadUrl:"",uploadHeader:{},editorOption:{modules:{toolbar:{container:[[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike","blockquote","clean"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{align:[]}],[{color:[]},{background:[]}],["image"]],handlers:{image:function(t){t?document.querySelector("#iviewUp input").click():this.quill.format("image",!1)}}}}},ruleValidate:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],img:[{required:!0,message:"请上传封面",trigger:"change"}],author:[{required:!0,message:"请输入作者",trigger:"blur"}],date:[{required:!0,message:"请输入日期",trigger:"blur"}]}}},created:function(){this.init(),this.getList(),this.uploadUrl=o.default.baseUrl+"Index/upload",this.uploadHeader={ApiAuth:sessionStorage.getItem("apiAuth")}},mounted:function(){},methods:{init:function(){var t=this;this.columnsList.forEach(function(e){"handle"===e.key&&(e.render=function(e,i){var n=t.tableData[i.index];return e("div",[d(t,e,n,i.index),c(t,e,n,i.index)])}),"img"===e.key&&(e.render=function(e,i){var n=t.tableData[i.index];return n.img?e("a",{attrs:{href:n.img,target:"_black"}},"查看图片"):e("Tag",{},"暂无图片")}),"content"===e.key&&(e.render=function(e,i){var n=t.tableData[i.index];return e("div",[u(t,e,n,i.index)])})})},alertAdd:function(){this.formItem.id=0,this.modalSetting.show=!0},handleView:function(){this.modalSeeingImg.show=!0,this.modalSeeingImg.img=this.formItem.img},handleImgSuccess:function(t){1===t.code?(this.$Message.success(t.msg),this.formItem.img=t.data.fileUrl):this.$Message.error(t.msg)},handleImgRemove:function(){this.formItem.img=""},handleImgFormatError:function(t){this.$Notice.warning({title:"文件类型不合法",desc:t.name+"的文件类型不正确，请上传jpg或者png图片。"})},handleImgMaxSize:function(t){this.$Notice.warning({title:"文件大小不合法",desc:t.name+"太大啦请上传小于5M的文件。"})},handleSingleSuccess:function(t,e){var i=this,n=this.$refs.myQuillEditor.quill;if(1===t.code){var a=n.getSelection().index;n.insertEmbed(a,"image",t.data.fileUrl),n.setSelection(a+1)}else i.$Message.error("图片插入失败")},handleFormatError:function(){},handleBeforeUpload:function(){},onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(){},submit:function(){var t=this;this.formItem.content=this.editor.getContent(),this.$refs.myForm.validate(function(e){e&&(t.modalSetting.loading=!0,(0,r.coruData)(t.formItem).then(function(e){1===e.data.code?(t.$Message.success(e.data.msg),t.getList(),t.cancel()):t.$Message.error(e.data.msg),t.modalSetting.loading=!1}))})},cancel:function(){this.modalSetting.show=!1},doCancel:function(t){t||(this.formItem.id=0,this.$refs.myForm.resetFields(),this.modalSetting.loading=!1,this.modalSetting.index=0)},changePage:function(t){this.tableShow.currentPage=t,this.getList()},changeSize:function(t){this.tableShow.pageSize=t,this.getList()},search:function(){this.tableShow.currentPage=1,this.getList()},getList:function(){var t=this;this.tableShow.loading=!0,(0,r.getDataList)(this.tableShow,this.searchConf).then(function(e){t.tableData=e.data.data.list,t.tableShow.listCount=e.data.data.count,t.tableShow.loading=!1})},onEditorReady:function(t){this.editor=t}}}},863:function(t,e,i){var n=i(864);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i(16).default;a("1088f74f",n,!1,{})},864:function(t,e,i){e=t.exports=i(15)(!1),e.push([t.i,"\n.demo-upload-list[data-v-b53cecea] {\n    display: inline-block;\n    width: 60px;\n    height: 60px;\n    text-align: center;\n    line-height: 60px;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n    position: relative;\n    box-shadow: 0 1px 1px rgba(0, 0, 0, .2);\n    margin-right: 4px;\n}\n.demo-upload-list img[data-v-b53cecea] {\n    width: 100%;\n    height: 100%;\n}\n.demo-upload-list-cover[data-v-b53cecea] {\n    display: none;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: rgba(0, 0, 0, .6);\n}\n.demo-upload-list:hover .demo-upload-list-cover[data-v-b53cecea] {\n    display: block;\n}\n.demo-upload-list-cover i[data-v-b53cecea] {\n    color: #fff;\n    font-size: 20px;\n    cursor: pointer;\n    margin: 0 2px;\n}\n",""])},865:function(t,e,i){var n=i(866);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i(16).default;a("5527752f",n,!1,{})},866:function(t,e,i){e=t.exports=i(15)(!1),e.push([t.i,"\n.ql-editor {\n    height: 300px;\n}\n.ql-editor_big {\n    height: 600px;\n}\n",""])},867:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.coruData=e.getDataList=void 0;var n=i(34),a=function(t){return t&&t.__esModule?t:{default:t}}(n);e.getDataList=function(t,e){return a.default.get("News/getList",{params:{page:t.currentPage,size:t.pageSize,searchConf:e}})},e.coruData=function(t){return a.default.post("News/coruData",t)}},868:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Row",[i("Col",{attrs:{span:"24"}},[i("Card",{staticStyle:{"margin-bottom":"10px"}},[i("Form",{attrs:{inline:""}},[i("FormItem",{staticStyle:{"margin-bottom":"0"}},[i("Input",{attrs:{clearable:"",placeholder:"新闻标题"},model:{value:t.searchConf.title,callback:function(e){t.$set(t.searchConf,"title",e)},expression:"searchConf.title"}})],1),t._v(" "),i("FormItem",{staticStyle:{"margin-bottom":"0"}},[i("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",placeholder:"选择日期范围"},on:{"on-change":function(e){t.searchConf.date=e}}})],1),t._v(" "),i("FormItem",{staticStyle:{"margin-bottom":"0"}},[i("Button",{attrs:{type:"primary",shape:"circle",icon:"ios-search"},on:{click:t.search}},[t._v("查询/刷新")])],1)],1)],1)],1)],1),t._v(" "),i("Row",[i("Col",{attrs:{span:"24"}},[i("Card",[i("p",{staticStyle:{height:"40px"},attrs:{slot:"title"},slot:"title"},[i("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.alertAdd}},[t._v("新增")])],1),t._v(" "),i("div",[i("Table",{attrs:{loading:t.tableShow.loading,columns:t.columnsList,data:t.tableData,border:"","disabled-hover":""}})],1),t._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[i("Page",{attrs:{total:t.tableShow.listCount,current:t.tableShow.currentPage,"page-size":t.tableShow.pageSize,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changeSize}})],1)])],1)],1),t._v(" "),i("Modal",{staticStyle:{"z-index":"999"},attrs:{fullscreen:"",width:"700"},on:{"on-visible-change":t.doCancel},model:{value:t.modalSetting.show,callback:function(e){t.$set(t.modalSetting,"show",e)},expression:"modalSetting.show"}},[i("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[i("Icon",{attrs:{type:"md-information-circle"}}),t._v(" "),i("span",[t._v(t._s(t.formItem.id?"编辑":"新增"))])],1),t._v(" "),i("Form",{ref:"myForm",attrs:{rules:t.ruleValidate,model:t.formItem,"label-width":100}},[i("FormItem",{attrs:{label:"新闻标题",prop:"title"}},[i("Input",{attrs:{placeholder:"新闻标题"},model:{value:t.formItem.title,callback:function(e){t.$set(t.formItem,"title",e)},expression:"formItem.title"}})],1),t._v(" "),i("FormItem",{attrs:{label:"新闻封面",prop:"img"}},[t.formItem.img?i("div",{staticClass:"demo-upload-list"},[i("img",{attrs:{src:t.formItem.img}}),t._v(" "),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(e){return t.handleView()}}}),t._v(" "),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){return t.handleImgRemove()}}})],1)]):t._e(),t._v(" "),t.formItem.img?i("input",{directives:[{name:"model",rawName:"v-model",value:t.formItem.img,expression:"formItem.img"}],attrs:{type:"hidden",name:"image"},domProps:{value:t.formItem.img},on:{input:function(e){e.target.composing||t.$set(t.formItem,"img",e.target.value)}}}):t._e(),t._v(" "),t.formItem.img?t._e():i("Upload",{staticStyle:{display:"inline-block",width:"58px"},attrs:{type:"drag",action:t.uploadUrl,headers:t.uploadHeader,format:["jpg","jpeg","png"],"max-size":5120,"on-success":t.handleImgSuccess,"on-format-error":t.handleImgFormatError,"on-exceeded-size":t.handleImgMaxSize}},[i("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[i("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])],1),t._v(" "),i("FormItem",{attrs:{label:"新闻内容",prop:"content"}},[i("VueUEditor",{attrs:{ueditorPath:"/static/Ue/",ueditorConfig:t.editorConfig},on:{ready:t.onEditorReady}})],1),t._v(" "),i("FormItem",{attrs:{label:"新闻作者",prop:"author"}},[i("Input",{attrs:{placeholder:"新闻作者"},model:{value:t.formItem.author,callback:function(e){t.$set(t.formItem,"author",e)},expression:"formItem.author"}})],1),t._v(" "),i("FormItem",{attrs:{label:"新闻日期",prop:"date"}},[i("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",value:t.formItem.date,placeholder:"选择日期"},on:{"on-change":function(e){t.formItem.date=e}}})],1)],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticStyle:{"margin-right":"8px"},attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),i("Button",{attrs:{type:"primary",loading:t.modalSetting.loading},on:{click:t.submit}},[t._v("确定")])],1)],1),t._v(" "),i("Modal",{attrs:{"footer-hide":"","class-name":"fl-image-modal"},model:{value:t.modalSeeingImg.show,callback:function(e){t.$set(t.modalSeeingImg,"show",e)},expression:"modalSeeingImg.show"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.modalSeeingImg.img}})]),t._v(" "),i("Modal",{attrs:{title:t.modalSeeingCon.title,"footer-hide":"",width:"1200",styles:{top:"30px"}},model:{value:t.modalSeeingCon.show,callback:function(e){t.$set(t.modalSeeingCon,"show",e)},expression:"modalSeeingCon.show"}},[i("div",{staticClass:"ql-container ql-snow"},[i("div",{staticClass:"ql-editor ql-editor_big"},[i("div",{domProps:{innerHTML:t._s(t.modalSeeingCon.content)}})])])])],1)},a=[];n._withStripped=!0,e.render=n,e.staticRenderFns=a}});